<!DOCTYPE html>
<html lang="en" dir="ltr" manifest="manifest.appcache">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link type="text/css" rel="stylesheet" href="styles/bootstrap.css">
	<link type="text/css" rel="stylesheet" href="styles/app.css">

	<title>Offline First Demo Application</title>
</head>
<body>

	<div ng-app="app" ng-controller="ChatCtrl">
		<header>
			<nav class="navbar navbar-default">
				<div class="container">
					<div class="navbar-header">
						<a class="navbar-brand" href="#">Offline First Demo</a>
						<a class="navbar-brand logout" ng-click="logout()" href="#" ng-if="$storage.loggedIn">Logout</a>
					</div>
				</div>
			</nav>
		</header>
		<main>
			<div class="container">

				<div class="alert alert-danger" role="alert" ng-if="!connection.online">
					You’re offline... waiting for connection...
				</div>
				<div class="alert alert-success" role="alert" ng-if="connection.online">
					You’re online... have a nice chat :)
				</div>

				<div class="panel panel-default" ng-show="!$storage.loggedIn">
				  <div class="panel-heading">
				    <h3 class="panel-title">Who are you?</h3>
				  </div>
				  <div class="panel-body">
				  	<form ng-submit="login()">
					    <div class="input-group">
					      <input type="text" class="form-control" placeholder="Username" ng-model="$storage.nickName" autofocus required>
					      <span class="input-group-btn">
					        <button class="btn btn-default" type="submit">Login</button>
					      </span>
					    </div>
				    </form>
				  </div>
				</div>

				<div ng-if="$storage.loggedIn">
					<p ng-repeat="message in messages | orderBy : 'dateTime' : true">
						<b>{{message.nickName}}: </b>{{message.message}}
					</p>
				</div>

			</div>
		</main>
		<footer>
			<div class="container">
				<form ng-submit="sendMessage()">
			    <div class="input-group" ng-show="$storage.loggedIn">
			      <input type="text" class="form-control" placeholder="Message ..." ng-model="message" autofocus required>
			      <span class="input-group-btn">
			        <button class="btn btn-default" type="submit">Send</button>
			      </span>
			    </div>
		    </form>
			</div>
		</footer>
	</div>

	<script type="text/javascript" src="scripts/firebase.js"></script>
	<script type="text/javascript" src="scripts/angular.js"></script>
	<script type="text/javascript" src="scripts/angularfire.js"></script>
	<script type="text/javascript" src="scripts/angularstorage.js"></script>
	<script type="text/javascript" src="scripts/app.js"></script>

</body>
</html>